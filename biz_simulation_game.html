<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1ì¸ ë²•ì¸ íˆ¬ì ì‹œë®¬ë ˆì´ì…˜ [Modern]</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* ëª¨ë˜ ë¼ì´íŠ¸ í…Œë§ˆ ìŠ¤íƒ€ì¼ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #1f2937; /* text-gray-800 */
            -webkit-tap-highlight-color: transparent;
        }
        /* í™”ë©´ ì „í™˜ */
        .screen { display: none; }
        .screen.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Wizard ìŠ¤í… */
        .wizard-step { display: none; }
        .wizard-step.active { display: block; }

        /* ì»¤ìŠ¤í…€ ì²´í¬ë°•ìŠ¤ */
        .custom-checkbox:checked + label div { background-color: #2563eb; border-color: #2563eb; }
        .custom-checkbox:checked + label svg { stroke: white; }

        /* ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™” */
        .nav-item.active svg, .nav-item.active span { color: #2563eb; }
    </style>
</head>
<body class="overflow-hidden">

    <!-- ë²•ì¸ ì„¤ë¦½ Wizard -->
    <div id="setup-wizard" class="fixed inset-0 bg-gray-100 z-50 flex flex-col items-center justify-center p-4">
        <div class="w-full max-w-md">
            <!-- ì§„í–‰ë„ ë°” -->
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-500" style="width: 33%"></div>
            </div>

            <!-- Step 1: ë²•ì¸ëª…/ëª©í‘œ ì„¤ì • -->
            <div id="step-1" class="wizard-step active">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-2xl font-bold mb-1 text-gray-900">ë²•ì¸ ì„¤ë¦½</h2>
                    <p class="text-gray-500 mb-6">ì‹œë®¬ë ˆì´ì…˜ì„ ì‹œì‘í•˜ê¸° ìœ„í•´ ë²•ì¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                    <label for="corp-name" class="block mb-2 text-sm font-medium text-gray-700">ë²•ì¸ëª…</label>
                    <input type="text" id="corp-name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mb-4" value="Gemini Corp.">
                    <label for="corp-goal" class="block mb-2 text-sm font-medium text-gray-700">ì„±ì¥ ëª©í‘œ</label>
                    <input type="text" id="corp-goal" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="ì˜ˆ: ìˆœìì‚° 100ì–µ ë‹¬ì„±">
                </div>
                <button onclick="nextStep(2)" class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors">ë‹¤ìŒ</button>
            </div>

            <!-- Step 2: ì„¤ë¦½ ì ˆì°¨ -->
            <div id="step-2" class="wizard-step">
                 <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-2xl font-bold mb-1 text-gray-900">ì„¤ë¦½ ì ˆì°¨ í™•ì¸</h2>
                    <p class="text-gray-500 mb-6">ë²•ì¸ ì„¤ë¦½ì— í•„ìš”í•œ ì ˆì°¨ì…ë‹ˆë‹¤. ì™„ë£Œë¥¼ ì²´í¬í•´ì£¼ì„¸ìš”.</p>
                    <ul class="space-y-4">
                        <li>
                            <input type="checkbox" id="task1" class="hidden custom-checkbox" onchange="updateProgress()">
                            <label for="task1" class="flex items-center cursor-pointer p-4 bg-gray-100 rounded-lg"><div class="w-6 h-6 border-2 border-gray-300 rounded-md flex items-center justify-center mr-4 transition-all"><svg class="w-4 h-4 stroke-transparent" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 6L9 17L4 12" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg></div><span class="font-semibold text-gray-800">ë²•ì¸ ë“±ê¸°</span></label>
                        </li>
                        <li>
                            <input type="checkbox" id="task2" class="hidden custom-checkbox" onchange="updateProgress()">
                            <label for="task2" class="flex items-center cursor-pointer p-4 bg-gray-100 rounded-lg"><div class="w-6 h-6 border-2 border-gray-300 rounded-md flex items-center justify-center mr-4 transition-all"><svg class="w-4 h-4 stroke-transparent" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 6L9 17L4 12" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg></div><span class="font-semibold text-gray-800">ì‚¬ì—…ì ë“±ë¡</span></label>
                        </li>
                    </ul>
                </div>
                <div class="flex mt-6 space-x-4">
                    <button onclick="prevStep(1)" class="w-1/3 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors">ì´ì „</button>
                    <button id="step2-next" onclick="nextStep(3)" class="w-2/3 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>ë‹¤ìŒ</button>
                </div>
            </div>

            <!-- Step 3: ì™„ë£Œ -->
            <div id="step-3" class="wizard-step">
                 <div class="bg-white rounded-xl shadow-md p-6 text-center">
                    <p class="text-5xl mb-4">ğŸ‰</p>
                    <h2 class="text-2xl font-bold mb-1 text-gray-900">ì„¤ë¦½ ì™„ë£Œ!</h2>
                    <p class="text-gray-500 mb-6">ì´ì œ ëŒ€í‘œë‹˜ì˜ ë²•ì¸ìœ¼ë¡œ íˆ¬ìë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <button onclick="startGame()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition-colors">ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì•± -->
    <div id="app" class="max-w-md mx-auto h-screen flex flex-col bg-gray-100 border-x border-gray-200 hidden">
        <!-- ìƒë‹¨ í—¤ë” -->
        <header class="p-4 flex justify-between items-center border-b border-gray-200 bg-white/80 backdrop-blur-sm sticky top-0 z-10">
            <div>
                <h1 id="header-corp-name" class="font-bold text-lg text-gray-900"></h1>
                <p id="game-time" class="text-xs text-gray-500">2025ë…„ 8ì›” 17ì¼</p>
            </div>
            <div class="text-4xl">ğŸ‘¨â€ğŸ’»</div>
        </header>

        <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
        <main class="flex-grow overflow-y-auto p-4 pb-20">
            <!-- 1. ëŒ€ì‹œë³´ë“œ í™”ë©´ -->
            <div id="dashboard-screen" class="screen active">
                <div class="bg-white rounded-xl shadow-md p-6 text-center mb-4">
                    <p class="text-sm text-gray-500 mb-1">ì´ ìˆœìì‚°</p>
                    <h2 class="text-4xl font-bold tracking-tight text-gray-900">â‚© 1,234,567,890</h2>
                    <p class="text-lg font-semibold text-red-600 mt-2">+1.25% (+15,432,100)</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 mb-4">
                    <h3 class="font-bold mb-3 text-center text-gray-800">ğŸ“Š ìì‚° í˜„í™©</h3>
                    <div class="w-full h-48 mx-auto"><canvas id="assetChart"></canvas></div>
                </div>
                <div class="space-y-3 mb-4">
                    <h3 class="font-bold mb-2 text-gray-800">ğŸ”” ì•Œë¦¼</h3>
                    <div id="tax-alert" class="hidden bg-yellow-100 border border-yellow-400 text-yellow-800 rounded-lg p-3 flex items-center space-x-3"><i data-lucide="calendar-clock" class="w-5 h-5"></i><div><p class="font-semibold">â— [ì„¸ê¸ˆ] ì›ì²œì„¸ ì‹ ê³ /ë‚©ë¶€ì¼ì…ë‹ˆë‹¤.</p></div></div>
                    <div class="bg-blue-100 border border-blue-400 text-blue-800 rounded-lg p-3 flex items-center space-x-3"><i data-lucide="newspaper" class="w-5 h-5"></i><div><p class="font-semibold">ğŸ“° [ì‹œì¥] ê°¤ëŸ­ìŠ¤ì „ì ì‹¤ì  ë°œí‘œ</p></div></div>
                </div>
                <button onclick="nextMonth()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                    <i data-lucide="arrow-right-circle"></i>
                    <span>ë‹¤ìŒ ë‹¬ë¡œ ë„˜ì–´ê°€ê¸°</span>
                </button>
            </div>

            <!-- 2. íˆ¬ì í™”ë©´ -->
            <div id="investment-screen" class="screen">
                <div class="bg-white rounded-xl shadow-md p-4">
                    <h3 class="font-bold text-xl mb-4 text-gray-900">ğŸ“ˆ ì‹œì¥</h3>
                    <div class="space-y-4">
                        <div>
                            <p class="font-semibold mb-2 text-gray-700">KOSPI</p>
                            <div class="space-y-2">
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <div><p class="font-bold text-gray-800">ê°¤ëŸ­ìŠ¤ì „ì</p></div>
                                        <div class="text-right"><p class="font-semibold text-red-600">85,300 â–²</p></div>
                                    </div>
                                    <div class="mt-2 pt-2 border-t border-gray-200 flex space-x-2"><button class="w-full bg-blue-500 text-white text-sm py-1 rounded">ë§¤ìˆ˜</button><button class="w-full bg-gray-300 text-gray-700 text-sm py-1 rounded">ë§¤ë„</button></div>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <div class="flex justify-between items-center">
                                        <div><p class="font-bold text-gray-800">SKí•˜ì´ë‹‰ìŠ¤</p></div>
                                        <div class="text-right"><p class="font-semibold text-blue-600">221,500 â–¼</p></div>
                                    </div>
                                    <div class="mt-2 pt-2 border-t border-gray-200 flex space-x-2"><button class="w-full bg-blue-500 text-white text-sm py-1 rounded">ë§¤ìˆ˜</button><button class="w-full bg-gray-300 text-gray-700 text-sm py-1 rounded">ë§¤ë„</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. ë²•ì¸ ê´€ë¦¬ í™”ë©´ -->
            <div id="corp-management-screen" class="screen">
                <div class="bg-white rounded-xl shadow-md p-4 mb-4">
                    <h3 class="font-bold mb-2 text-gray-800">ğŸ’¼ ëŒ€í‘œì´ì‚¬ ê¸‰ì—¬ (ì›”)</h3>
                    <p class="text-2xl font-bold text-center mb-2 text-gray-900" id="salary-display">â‚© 5,000,000</p>
                    <input type="range" min="2500000" max="10000000" value="5000000" step="100000" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" id="salary-slider">
                    <button id="transfer-salary-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition-colors mt-4">ê¸‰ì—¬ ì´ì²´</button>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4">
                    <h3 class="font-bold mb-3 text-gray-800">ğŸ§¾ ì„¸ë¬´ ì¼ì •</h3>
                    <div id="tax-payment-section" class="hidden bg-gray-50 p-3 rounded-lg">
                        <div class="flex justify-between items-center">
                            <p>8ì›”ë¶„ ì›ì²œì„¸</p>
                            <button class="bg-red-600 hover:bg-red-700 text-white text-sm font-bold py-1 px-3 rounded">ë‚©ë¶€í•˜ê¸°</button>
                        </div>
                    </div>
                    <div id="tax-placeholder" class="text-center text-gray-400 py-4">
                        <p>ì´ë²ˆ ë‹¬ ë‚©ë¶€í•  ì„¸ê¸ˆ ì—†ìŒ</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto h-16 bg-white/80 backdrop-blur-sm border-t border-gray-200 flex justify-around items-center">
            <button class="nav-item active" data-screen="dashboard-screen"><div class="flex flex-col items-center w-16"><i data-lucide="layout-dashboard" class="w-6 h-6 mb-1"></i><span class="text-xs">ëŒ€ì‹œë³´ë“œ</span></div></button>
            <button class="nav-item" data-screen="investment-screen"><div class="flex flex-col items-center w-16"><i data-lucide="candlestick-chart" class="w-6 h-6 mb-1"></i><span class="text-xs">íˆ¬ì</span></div></button>
            <button class="nav-item" data-screen="corp-management-screen"><div class="flex flex-col items-center w-16"><i data-lucide="briefcase" class="w-6 h-6 mb-1"></i><span class="text-xs">ë²•ì¸ê´€ë¦¬</span></div></button>
        </nav>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 3;
        const progressBar = document.getElementById('progress-bar');
        
        // --- ê²Œì„ ìƒíƒœ ê´€ë¦¬ ---
        let gameDate = new Date(2025, 7, 17); // 2025ë…„ 8ì›” 17ì¼
        let taxDue = false;

        function showStep(stepNumber) {
            document.querySelectorAll('.wizard-step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step-${stepNumber}`).classList.add('active');
            progressBar.style.width = `${(stepNumber / totalSteps) * 100}%`;
        }
        function nextStep(step) { currentStep = step; showStep(step); }
        function prevStep(step) { currentStep = step; showStep(step); }
        function updateProgress() {
            const task1 = document.getElementById('task1').checked;
            const task2 = document.getElementById('task2').checked;
            document.getElementById('step2-next').disabled = !(task1 && task2);
        }
        function startGame() {
            const corpName = document.getElementById('corp-name').value || "Gemini Corp.";
            document.getElementById('header-corp-name').textContent = corpName;
            document.getElementById('setup-wizard').style.display = 'none';
            document.getElementById('app').style.display = 'flex';
            localStorage.setItem('corpSimSetupComplete', 'true');
            updateDateDisplay();
        }
        
        function updateDateDisplay() {
            const dateEl = document.getElementById('game-time');
            dateEl.textContent = `${gameDate.getFullYear()}ë…„ ${gameDate.getMonth() + 1}ì›” ${gameDate.getDate()}ì¼`;
        }
        
        function nextMonth() {
            // ë‚ ì§œë¥¼ ë‹¤ìŒë‹¬ 1ì¼ë¡œ ë³€ê²½
            gameDate.setMonth(gameDate.getMonth() + 1, 1);
            updateDateDisplay();

            // ì„¸ê¸ˆ ë‚©ë¶€ ì˜ë¬´ ë°œìƒ
            taxDue = true;
            updateTaxUI();
            
            // ê¸‰ì—¬ ì´ì²´ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
            document.getElementById('transfer-salary-btn').disabled = false;
            document.getElementById('transfer-salary-btn').textContent = "ê¸‰ì—¬ ì´ì²´";
        }

        function updateTaxUI() {
            const taxAlert = document.getElementById('tax-alert');
            const taxPaymentSection = document.getElementById('tax-payment-section');
            const taxPlaceholder = document.getElementById('tax-placeholder');

            if (taxDue) {
                taxAlert.classList.remove('hidden');
                taxPaymentSection.classList.remove('hidden');
                taxPlaceholder.classList.add('hidden');
            } else {
                taxAlert.classList.add('hidden');
                taxPaymentSection.classList.add('hidden');
                taxPlaceholder.classList.remove('hidden');
            }
        }


        document.addEventListener('DOMContentLoaded', function () {
            lucide.createIcons();
            if (localStorage.getItem('corpSimSetupComplete') === 'true') {
                startGame();
            }

            const ctx = document.getElementById('assetChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['êµ­ë‚´ ì£¼ì‹', 'í•´ì™¸ ì£¼ì‹', 'ì›í™”', 'ë‹¬ëŸ¬'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: ['#3b82f6', '#ef4444', '#22c55e', '#f97316'],
                        borderColor: '#ffffff', borderWidth: 4
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    cutout: '70%'
                }
            });

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    navItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                    document.getElementById(item.dataset.screen).classList.add('active');
                });
            });

            const salarySlider = document.getElementById('salary-slider');
            if(salarySlider) {
                salarySlider.addEventListener('input', (e) => {
                    document.getElementById('salary-display').textContent = `â‚© ${parseInt(e.target.value).toLocaleString()}`;
                });
            }
            
            // ê¸‰ì—¬ ì´ì²´ ë²„íŠ¼ ë¡œì§
            const transferBtn = document.getElementById('transfer-salary-btn');
            transferBtn.addEventListener('click', () => {
                transferBtn.disabled = true;
                transferBtn.textContent = "ì´ë²ˆ ë‹¬ ê¸‰ì—¬ ì´ì²´ ì™„ë£Œ";
                // ì‹¤ì œ ê²Œì„ì—ì„œëŠ” ì—¬ê¸°ì„œ ìì‚° ì°¨ê° ë¡œì§ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.
            });

            // ì„¸ê¸ˆ ë‚©ë¶€ ë²„íŠ¼ ë¡œì§
            const taxPayBtn = document.querySelector('#tax-payment-section button');
            taxPayBtn.addEventListener('click', () => {
                taxDue = false;
                updateTaxUI();
                 // ì‹¤ì œ ê²Œì„ì—ì„œëŠ” ì—¬ê¸°ì„œ ìì‚° ì°¨ê° ë¡œì§ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.
            });
        });
    </script>
</body>
</html>
