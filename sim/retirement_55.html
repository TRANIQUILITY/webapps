<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>은퇴 계획 수립: 인터랙티브 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Horizon -->
    <!-- Application Structure Plan: The application transforms the linear report into a 3-step interactive journey: 1. Goal Setting, 2. Strategy Building, 3. Withdrawal Technique. This user-centric, task-oriented structure allows users to personalize the information by inputting their own data (lifestyle, age, etc.), making the complex report more digestible and actionable. Instead of passively reading, the user actively builds their own preliminary retirement plan, which significantly enhances understanding and engagement. -->
    <!-- Visualization & Content Choices: 
    - Report Info: Table 1 (Retirement Goal Calculation) -> Goal: Inform/Interact -> Viz/Method: Interactive HTML form/calculator -> Interaction: User inputs lifestyle, gets personalized target fund amount -> Justification: Makes the abstract concept of 'how much is enough' concrete and personal.
    - Report Info: Table 2 (Asset Allocation) -> Goal: Compare/Inform -> Viz/Method: Dynamic Chart.js Doughnut Chart -> Interaction: Chart updates based on user's selected age group -> Justification: Visually represents complex allocation data in an easy-to-understand format.
    - Report Info: Part 3 (Personalized Strategies) -> Goal: Organize/Inform -> Viz/Method: Dynamic content display using HTML/CSS cards -> Interaction: User selects profile (age, literacy, housing), relevant strategy cards are shown -> Justification: Filters a large amount of information to show only what's relevant to the user, preventing information overload.
    - Report Info: Table 3 (Withdrawal Simulation) -> Goal: Inform/Change -> Viz/Method: Simplified HTML table showing withdrawal flow -> Interaction: Static display for clarity, but demonstrates the tax-optimization concept over time -> Justification: Illustrates the powerful but complex tax-saving strategy in a step-by-step, simplified manner.
    - Library/Method: Chart.js (via CDN) for charts. Vanilla JS for all logic. Tailwind CSS for all styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .calm-blue { background-color: #A8C5D4; }
        .calm-blue-text { color: #A8C5D4; }
        .calm-green { background-color: #D4E2D4; }
        .calm-green-text { color: #86A886; }
        .calm-brown { background-color: #E8D8C4; }
        .calm-brown-text { color: #A08C78; }
        .calm-bg { background-color: #FDFBF8; }
        .section-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }
        .section-subtitle {
            font-size: 1.125rem;
            color: #666;
            margin-bottom: 2.5rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.8;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .interactive-button {
            background-color: #A8C5D4;
            color: white;
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            transition: background-color 0.3s ease;
        }
        .interactive-button:hover {
            background-color: #8EAEBF;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        .tab-button.active {
            background-color: #A8C5D4;
            color: white;
            border-color: #A8C5D4;
        }
        .tab-button:not(.active) {
            background-color: #F0F0F0;
            color: #666;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #555;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            font-weight: 400;
            line-height: 1.6;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="calm-bg">

    <header class="bg-white/80 backdrop-blur-sm sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold calm-blue-text">
                은퇴 계획 수립
            </div>
            <div class="hidden md:flex space-x-8 text-gray-600">
                <a href="#goal" class="hover:calm-blue-text transition">1. 목표 설정</a>
                <a href="#strategy" class="hover:calm-blue-text transition">2. 전략 수립</a>
                <a href="#withdrawal" class="hover:calm-blue-text transition">3. 인출 기술</a>
            </div>
        </nav>
    </header>

    <main>
        <section id="goal" class="py-20 px-6 text-center">
            <h2 class="section-title">STEP 1: 은퇴 목표 설정하기</h2>
            <p class="section-subtitle">
                성공적인 은퇴는 정확한 목표 설정에서 시작됩니다. 원하는 라이프스타일과 개인적인 상황을 바탕으로, 당신에게 필요한 은퇴 자금 규모를 직접 계산해보세요. 이는 당신의 여정에 명확한 이정표가 될 것입니다.
            </p>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-white p-8 rounded-xl shadow-lg">
                <div class="text-left space-y-6">
                    <div>
                        <label class="font-bold text-gray-700">1. 가구 유형을 선택하세요.</label>
                        <select id="householdType" class="w-full mt-2 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300">
                            <option value="single">1인 가구</option>
                            <option value="couple" selected>부부 가구</option>
                        </select>
                    </div>
                    <div>
                        <label class="font-bold text-gray-700">2. 원하는 은퇴 후 생활 수준을 선택하세요.</label>
                        <select id="lifestyleLevel" class="w-full mt-2 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300">
                            <option value="min">최소 생활 (기본적인 의식주 해결)</option>
                            <option value="adequate" selected>적정 생활 (여가, 취미 활동 포함)</option>
                            <option value="affluent">풍요로운 생활 (활발한 사회 활동, 여행)</option>
                        </select>
                    </div>
                    <div>
                        <label class="font-bold text-gray-700">3. 개인적인 추가 비용/절감액을 입력하세요. (연 단위, 만원)</label>
                        <input id="personalAdjustment" type="number" value="500" class="w-full mt-2 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300" placeholder="예: 500 (여행, 경조사 등)">
                    </div>
                     <div>
                        <label class="font-bold text-gray-700">4. 적용할 인출률을 선택하세요. 
                            <span class="tooltip text-sm font-normal text-blue-500 cursor-pointer">(?)
                                <span class="tooltiptext">전통적인 4% 법칙은 세금, 수수료, 초기 시장 하락 위험(수익률 순서 위험)을 고려할 때 한국의 조기 은퇴자에게는 다소 공격적일 수 있습니다. 보다 보수적인 3% 인출률 적용을 권장합니다.</span>
                            </span>
                        </label>
                        <select id="withdrawalRate" class="w-full mt-2 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300">
                            <option value="0.04">4% (일반적 기준)</option>
                            <option value="0.035">3.5% (보수적 기준)</option>
                            <option value="0.03" selected>3% (매우 보수적 기준)</option>
                        </select>
                    </div>
                </div>
                <div class="calm-green p-8 rounded-lg text-center h-full flex flex-col justify-center">
                    <h3 class="text-2xl font-bold mb-4 text-gray-700">55세 은퇴 목표 자금</h3>
                    <p id="resultAmount" class="text-4xl md:text-5xl font-bold calm-green-text">14억 8,515만원</p>
                    <p class="mt-4 text-gray-600">
                        연간 필요 소득: <span id="annualIncome" class="font-bold">4,502만원</span>
                    </p>
                </div>
            </div>
        </section>

        <section id="strategy" class="py-20 px-6 text-center bg-white">
            <h2 class="section-title">STEP 2: 맞춤형 전략 수립하기</h2>
            <p class="section-subtitle">
                모두에게 적용되는 단 하나의 정답은 없습니다. 당신의 연령대, 금융 이해도, 부동산 보유 현황에 따라 가장 효과적인 자산 축적 전략은 달라집니다. 당신의 프로필을 선택하고 최적화된 로드맵을 확인하세요.
            </p>
            <div class="max-w-6xl mx-auto">
                <div class="bg-gray-100 p-6 rounded-xl mb-12 flex flex-wrap justify-center items-center gap-4 md:gap-8">
                    <div>
                        <span class="font-bold mr-3">연령대:</span>
                        <div class="inline-flex space-x-2" id="ageGroupTabs">
                            <button class="tab-button" data-value="20s">20-30대</button>
                            <button class="tab-button active" data-value="40s">40대</button>
                            <button class="tab-button" data-value="50s">50대 초반</button>
                        </div>
                    </div>
                    <div>
                        <span class="font-bold mr-3">금융 이해도:</span>
                        <div class="inline-flex space-x-2" id="literacyTabs">
                            <button class="tab-button active" data-value="beginner">초보자</button>
                            <button class="tab-button" data-value="expert">숙련자</button>
                        </div>
                    </div>
                    <div>
                        <span class="font-bold mr-3">부동산:</span>
                        <div class="inline-flex space-x-2" id="housingTabs">
                            <button class="tab-button active" data-value="homeowner">1주택자</button>
                            <button class="tab-button" data-value="renter">무주택자</button>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-5 gap-8">
                    <div class="md:col-span-3 text-left">
                        <h3 class="text-2xl font-bold mb-4">당신을 위한 추천 전략</h3>
                        <div id="strategy-content" class="space-y-4"></div>
                    </div>
                    <div class="md:col-span-2">
                         <h3 class="text-2xl font-bold mb-4">추천 자산배분</h3>
                        <div class="chart-container">
                            <canvas id="assetAllocationChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="mt-20">
                    <h3 class="text-2xl font-bold mb-6">은퇴 소득의 3대 기둥</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                        <div class="card p-6">
                            <h4 class="text-xl font-bold mb-2 calm-blue-text">국민연금</h4>
                            <p class="text-gray-600">은퇴 후반기(65세~)의 삶을 지탱하는 장기적 안정성의 초석입니다. 조기수령은 감액이 크므로, 55-65세 소득 공백은 다른 수단으로 메우고 65세부터 100% 수령하는 것이 유리합니다.</p>
                        </div>
                        <div class="card p-6">
                            <h4 class="text-xl font-bold mb-2 calm-green-text">IRP/연금저축</h4>
                            <p class="text-gray-600">55세부터 수령 가능하여 '소득 크레바스'를 잇는 가장 강력한 다리입니다. 세액공제와 퇴직소득세 30% 감면 혜택을 극대화하는 것이 핵심입니다.</p>
                        </div>
                        <div class="card p-6">
                            <h4 class="text-xl font-bold mb-2 calm-brown-text">주택연금</h4>
                            <p class="text-gray-600">최대 자산인 주택을 유동화하여 시장 변동성과 무관한 안정적인 현금흐름을 만드는 방파제입니다. 55세부터 가입하여 '소득의 바닥'을 만들 수 있습니다.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="withdrawal" class="py-20 px-6 text-center">
            <h2 class="section-title">STEP 3: 현명한 인출 기술</h2>
            <p class="section-subtitle">
                자산을 모으는 것만큼이나 현명하게 사용하는 것이 중요합니다. 세금 부담을 최소화하고 예측 불가능한 위험에 대비하여, 평생 마르지 않는 현금 흐름을 만드는 정교한 인출의 기술을 알아보세요.
            </p>
            <div class="max-w-6xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div class="text-left">
                        <h3 class="text-2xl font-bold mb-4">세금 최적화 인출 시뮬레이션</h3>
                        <p class="mb-6 text-gray-600">사적연금은 법적으로 정해진 인출 순서(비과세 → 퇴직금 → 과세대상)를 따릅니다. 이를 활용하면 수년간 '과세대상 연금소득'을 0원으로 유지하며 세금을 극적으로 줄일 수 있습니다. 아래는 연 3,600만원 인출 시의 예시입니다.</p>
                        <div class="overflow-x-auto bg-white rounded-lg shadow">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-gray-100 text-gray-700">
                                    <tr>
                                        <th class="p-3">연차</th>
                                        <th class="p-3">인출 재원</th>
                                        <th class="p-3">과세대상 연금소득</th>
                                        <th class="p-3">예상 세금</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y">
                                    <tr class="hover:bg-gray-50">
                                        <td class="p-3 font-medium">1년차 (55세)</td>
                                        <td class="p-3">비과세 재원</td>
                                        <td class="p-3 font-bold text-green-600">0원</td>
                                        <td class="p-3 font-bold text-green-600">0원</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="p-3 font-medium">2-9년차</td>
                                        <td class="p-3">퇴직금 재원</td>
                                        <td class="p-3 font-bold text-green-600">0원</td>
                                        <td class="p-3">감면된 퇴직소득세만 납부</td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="p-3 font-medium">10년차 이후</td>
                                        <td class="p-3">과세대상 재원</td>
                                        <td class="p-3 text-red-600">&lt; 1,500만원 관리</td>
                                        <td class="p-3">3.3%~5.5% 저율과세</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                         <p class="mt-4 text-xs text-gray-500">* 위 표는 개념 설명을 위한 단순화된 예시입니다. 개인의 자산 구성에 따라 결과는 달라질 수 있습니다.</p>
                    </div>
                    <div class="text-left">
                        <h3 class="text-2xl font-bold mb-4">은퇴의 3대 역풍 대비하기</h3>
                        <p class="mb-6 text-gray-600">성공적인 은퇴 항해를 위해 인플레이션, 시장 변동성, 의료비라는 3대 암초에 대한 방어 체계를 반드시 구축해야 합니다.</p>
                        <div class="space-y-4">
                            <div class="card p-5">
                                <h4 class="text-lg font-bold calm-blue-text">1. 인플레이션 (조용한 자산 도둑)</h4>
                                <p class="text-gray-600 mt-1">물가연동국채(TIPS), 리츠(REITs), 주식 등 물가 상승률 이상으로 성장하는 자산을 포트폴리오에 편입하여 구매력 하락을 방어해야 합니다.</p>
                            </div>
                             <div class="card p-5">
                                <h4 class="text-lg font-bold calm-green-text">2. 수익률 순서의 위험 (초기 시장 충격)</h4>
                                <p class="text-gray-600 mt-1">최소 1~2년치 생활비에 해당하는 '현금 완충 자금'을 별도로 마련하여, 시장 하락기에 투자 자산을 헐값에 매도하는 최악의 상황을 피해야 합니다.</p>
                            </div>
                             <div class="card p-5">
                                <h4 class="text-lg font-bold calm-brown-text">3. 건강 및 긴급 상황 (예측 불가 변수)</h4>
                                <p class="text-gray-600 mt-1">실손의료보험 등 충분한 보험 안전망을 확보하고, 은퇴 예산에 의료비 항목을 별도로 책정하여 관리해야 합니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        const livingCosts = {
            single: { min: 129, adequate: 182, affluent: 256 },
            couple: { min: 215, adequate: 296, affluent: 407 }
        };

        const strategies = {
            ageGroup: {
                '20s': {
                    title: "20-30대: 공격적 성장과 시간의 힘 활용",
                    points: [
                        "<strong>핵심 전략:</strong> '시간'이라는 가장 강력한 무기를 활용하여 수십 년간의 복리 효과를 극대화합니다.",
                        "<strong>실행 계획 1:</strong> 사회 초년기부터 IRP/연금저축 계좌에 소액이라도 꾸준히 납입하여 세제 혜택과 장기 투자의 기틀을 마련하세요.",
                        "<strong>실행 계획 2:</strong> 위험자산(주식 등) 비중을 70-80%로 높게 가져가는 공격적 성장 전략을 추구하세요. 글로벌 분산 ETF가 좋은 선택입니다."
                    ],
                    allocation: { '해외 주식': 60, '국내 주식': 20, '대체 자산': 10, '채권': 10 }
                },
                '40s': {
                    title: "40대: 소득 극대화와 저축률 증대",
                    points: [
                        "<strong>핵심 전략:</strong> 소득이 정점에 이르는 '자산 축적의 황금기'입니다. 저축률을 최대로 끌어올리는 것이 성패를 좌우합니다.",
                        "<strong>실행 계획 1:</strong> IRP/연금저축 납입액을 법정 최고 한도(연 1,800만원)까지 늘리는 것을 목표로 삼으세요.",
                        "<strong>실행 계획 2:</strong> 40대 후반부터는 점진적으로 안정자산 비중을 높여 위험 관리를 시작해야 합니다. TDF나 배당주 비중 확대가 좋은 방법입니다."
                    ],
                    allocation: { '해외 주식': 40, '국내 주식': 15, '채권': 30, '대체 자산': 10, '현금': 5 }
                },
                '50s': {
                    title: "50대 초반: 자산 보존과 은퇴 전환 준비",
                    points: [
                        "<strong>핵심 전략:</strong> 새로운 수익 추구보다 쌓아온 자산을 안전하게 지키는 '자본 보존'이 최우선 과제입니다.",
                        "<strong>실행 계획 1:</strong> 포트폴리오의 변동성을 낮추기 위해 주식 비중을 줄이고 채권, 현금 등 안전자산 비중을 크게 확대하세요.",
                        "<strong>실행 계획 2:</strong> 은퇴 후 1~2년간의 생활비를 충당할 '현금 완충 자금'을 별도로 마련하여 시장 급락에 대비해야 합니다."
                    ],
                    allocation: { '채권': 55, '해외 주식': 20, '국내 주식': 5, '현금': 10, '대체 자산': 10 }
                }
            },
            literacy: {
                beginner: {
                    title: "금융 초보자: 자동화, 저비용, 단순함",
                    points: [
                        "<strong>TDF (타겟데이트펀드):</strong> 은퇴 시점에 맞춰 자동으로 자산 배분을 조절해주는 상품입니다. 신경 쓰지 않아도 연령대에 맞는 위험 관리가 이루어져 IRP/연금저축 운용에 가장 이상적입니다.",
                        "<strong>로보어드바이저:</strong> 알고리즘이 맞춤형 ETF 포트폴리오를 저렴한 수수료로 운용해주는 서비스입니다. 투자의 복잡성을 피하고 꾸준한 투자를 지속하는 데 효과적입니다."
                    ]
                },
                expert: {
                    title: "숙련된 투자자: 비용 최적화, 포트폴리오 다각화",
                    points: [
                        "<strong>핵심-위성 전략:</strong> 포트폴리오 중심(Core)은 저비용 시장 지수 ETF로 안정적으로 구성하고, 일부(Satellite)는 특정 섹터/테마에 투자해 초과 수익을 추구합니다.",
                        "<strong>인컴 자산 편입:</strong> 은퇴가 가까워질수록 꾸준한 현금 흐름을 창출하는 고배당주, 리츠(REITs) 등의 비중을 늘려 소득 안정성을 높이는 것이 중요합니다."
                    ]
                }
            },
            housing: {
                homeowner: {
                    title: "1주택 소유자: 주택 자산의 전략적 통합",
                    points: [
                        "<strong>주택연금 활용:</strong> 만 55세부터 주택연금에 가입하여 평생 고정적인 현금 흐름을 창출하는 것을 기본 전략으로 고려하세요. 시장 변동성에 대한 강력한 방어막이 됩니다.",
                        "<strong>다운사이징:</strong> 현재 주택을 매각하고 더 작은 집으로 이사하여 발생하는 차액을 투자 포트폴리오에 편입하여 금융 자산을 극적으로 늘릴 수 있습니다."
                    ]
                },
                renter: {
                    title: "무주택자: 금융 자산 축적의 극대화",
                    points: [
                        "<strong>압도적으로 높은 저축률:</strong> 주택연금이나 다운사이징 선택지가 없으므로, 은퇴에 필요한 모든 자금을 금융 자산으로 마련해야 합니다. 훨씬 더 높은 저축률과 공격적인 자산 축적이 요구됩니다.",
                        "<strong>철저한 리스크 관리:</strong> 자산 전부가 시장 변동성에 노출되므로, 자산 배분 원칙을 철저히 지키고 은퇴가 가까워질수록 포트폴리오를 보수적으로 전환하는 것이 필수적입니다."
                    ]
                }
            }
        };

        let assetAllocationChart;

        function formatCurrency(amount) {
            const 억 = Math.floor(amount / 10000);
            const 만 = Math.floor(amount % 10000);
            if (억 > 0) {
                return `${억}억 ${만 > 0 ? `${만.toLocaleString()}만원` : ''}`;
            }
            return `${만.toLocaleString()}만원`;
        }

        function calculateRetirementGoal() {
            const household = document.getElementById('householdType').value;
            const lifestyle = document.getElementById('lifestyleLevel').value;
            const adjustment = parseFloat(document.getElementById('personalAdjustment').value) || 0;
            const rate = parseFloat(document.getElementById('withdrawalRate').value);

            const monthlyCost = livingCosts[household][lifestyle];
            const annualBaseCost = monthlyCost * 12;
            const adjustedAnnualCost = annualBaseCost + adjustment;
            
            const annualPreTaxIncome = adjustedAnnualCost / (1 - 0.1); // Assuming 10% effective tax rate
            const totalFund = annualPreTaxIncome / rate;

            document.getElementById('resultAmount').textContent = formatCurrency(Math.round(totalFund));
            document.getElementById('annualIncome').textContent = formatCurrency(Math.round(annualPreTaxIncome));
        }

        function updateStrategyDisplay() {
            const ageGroup = document.querySelector('#ageGroupTabs .active').dataset.value;
            const literacy = document.querySelector('#literacyTabs .active').dataset.value;
            const housing = document.querySelector('#housingTabs .active').dataset.value;

            const ageStrategy = strategies.ageGroup[ageGroup];
            const literacyStrategy = strategies.literacy[literacy];
            const housingStrategy = strategies.housing[housing];

            let contentHTML = `<div class="card p-6 mb-4"><h4 class="text-xl font-bold mb-2 calm-blue-text">${ageStrategy.title}</h4><ul class="list-disc list-inside space-y-2 text-gray-600">${ageStrategy.points.map(p => `<li>${p}</li>`).join('')}</ul></div>`;
            contentHTML += `<div class="card p-6 mb-4"><h4 class="text-xl font-bold mb-2 calm-green-text">${literacyStrategy.title}</h4><ul class="list-disc list-inside space-y-2 text-gray-600">${literacyStrategy.points.map(p => `<li>${p}</li>`).join('')}</ul></div>`;
            contentHTML += `<div class="card p-6"><h4 class="text-xl font-bold mb-2 calm-brown-text">${housingStrategy.title}</h4><ul class="list-disc list-inside space-y-2 text-gray-600">${housingStrategy.points.map(p => `<li>${p}</li>`).join('')}</ul></div>`;

            document.getElementById('strategy-content').innerHTML = contentHTML;

            renderAssetAllocationChart(ageStrategy.allocation);
        }

        function renderAssetAllocationChart(data) {
            const ctx = document.getElementById('assetAllocationChart').getContext('2d');
            const labels = Object.keys(data);
            const values = Object.values(data);

            if (assetAllocationChart) {
                assetAllocationChart.destroy();
            }

            assetAllocationChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: values,
                        backgroundColor: ['#A8C5D4', '#86A886', '#E8D8C4', '#F2AE72', '#B2B2B2'],
                        borderColor: '#FFFFFF',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        function setupTabListeners(containerId) {
            const container = document.getElementById(containerId);
            container.addEventListener('click', (e) => {
                if (e.target.classList.contains('tab-button')) {
                    container.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    updateStrategyDisplay();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const calculatorInputs = ['householdType', 'lifestyleLevel', 'personalAdjustment', 'withdrawalRate'];
            calculatorInputs.forEach(id => document.getElementById(id).addEventListener('change', calculateRetirementGoal));
            
            setupTabListeners('ageGroupTabs');
            setupTabListeners('literacyTabs');
            setupTabListeners('housingTabs');

            calculateRetirementGoal();
            updateStrategyDisplay();
            
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>
</html>


